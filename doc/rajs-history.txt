――――――――――――――――――――――――――――――――――――
 Hakoniwa R.A. JavaScript version4.xx

       patchworked by neo_otacky.     since 2001/12/10

                 arranged from Hakoniwa R.A. ver1.11(010713model)
                                             ver2.11(020610model) by KEI
                               JSmode(ver.1.01) scripted by あっぽー
                               based on 箱庭諸島 ver2.30 by 徳岡宏樹
――――――――――――――――――――――――――――――――――――
【更新履歴】

ver4.49(『クリスタル争奪戦』勝利者賞)
======= 2003/09/15
・「島島」となるログがあるのを修正。
・$HlandWasteを$HlandWatseにスペルミスしていたバグ修正。
・陣営戦関連バグ修正。

ver4.48(『７日間戦争』勝利者賞)
======= 2003/08/24
・スタジアムがないのに、箱庭カップが開催ログや決勝進出のログが出たりするのを修正。
・終了ターンを設定している時、最後のターンが更新されないバグを修正。
・同盟関連機能導入。
・countAround改良。
・forループの一部をforeachに変更。負荷軽減のつもり(・_・?

ver4.47
======= 2003/08/01
・トップに表示されるゲーム終了日時に狂いがあったのを修正。
・海上都市が巨大怪獣を喰ってしまうバグ修正。
・ラスティアさんのlbbslist.cgiを同梱してみる（謎）

ver4.46
======= 2003/07/16
・ウリエルに攻撃された怪獣がバグるのを修正。
・マイナスの移民が出るバグを修正。
・HakoniwaCupの初期化に関わる不具合を修正。

ver4.45
======= 2003/07/10
・ターン杯のステータスバーへの表示を微妙に修正。
・観光者通信に「極秘確認」
　＞投稿すれば確認できますが、投稿せずに確認する場合は「極秘確認」ボタン。
・ポップアップ・コマンド・メニューに地形データを表示するようにした。

ver4.44
======= 2003/06/29
・巨大怪獣の命中ログがでる時には命中数をカウントしないようにした。
　＞つもり(^^;;;
・ローカル掲示板のパスワードチェックがおかしかったのを修正。

ver4.43
======= 2003/06/29
・衛星レーザー、衛星破壊砲のログが攻撃された島に表示されないバグ修正。
・地震で温泉が壊れた時、荒地になってしまうバグがなおってなかったというおバカなバ
　グ修正。
・不発判定のバグ修正。
＞＞以上、すべてにっぷるさんからのバグ報告です。《にっぷるさんThanx!》

ver4.42
======= 2003/06/20
・地震で温泉が壊れた時、荒地になってしまうバグ修正。《にっぷるさんThanx!》
・トップページの出現中の怪獣名がステータスバーに表示されないバグ修正。
・ターン杯受賞回数が多すぎると表示されなくなる症状を改善。

ver4.41
======= 2003/05/18
・「HakoniwaCup戦績」のバグ修正と機能強化。
　＞バグとりで付けた機能にバグがある(^^ゞ

ver4.40
======= 2003/05/17
・負荷軽減のためjcodeを極力使用しないようにした。
　＞analyzer.cgiをEUCに変更。
　＞アクセスログの保存形式をEUCに変更したので、以前のログは文字化けすると思います。
・軍事物資を使う設定の時、</TD>が多く出力されるバグを修正。
　＞全然気にならないんですけど、直してみました。
・ターン更新直後にユニーク地形の個数が約２倍に表示されるバグ修正。
　＞変数の初期化し忘れです。
・HakoniwaCupの決勝進出島が成績でなく島の順位だったのを修正。
　＞症状確認のため、戦績ページ追加。

ver4.39
======= 2003/05/05
・トップページで、ターン杯がステータスバーに表示されないバグ修正。
・totoとNumbersのバグ修正。《KEIさんThanx!》
・history.cgiのパスワードチェックの方法を変更。
　＞機密表示にクッキーのIDも使うようにした。

ver4.38
======= 2003/04/28
・Ａランクの防災都市が島の端っこにある場合に挙動がおかしくなるバグを修正。《いそ
　ぴぃさんThanx!》
・箱庭カップに参加島がない場合のログがおかしかったのを修正。
・history.cgiのヘッダに各島の近況へのリンクをつけた。
・「歴代最多人口記録」のデータファイルを作ったターンにトップページの順位がおかし
　くなるバグを修正。《〓ＢＡＴＵ〓さんThanx!》
　＞結局islandSortを仕様変更しました。《かっちんさんThanx!》
・「歴代最多人口記録」の新しい島の記録ターンにバグがあったのを修正。
・バージョン情報をトップページに表示するようにした。

ver4.37
======= 2003/03/02
・マスコットテトラもマスコットいのらも島が好きでちゃんと家出してくれないバグを修
　正。《いそぴぃさんThanx!》

ver4.36
======= 2003/02/16
・ハイテク誘致コマンドで、回数指定してもターン更新後にコマンドが消えてしまうバグ
　を修正。《篁さんThanx!》
・管理人あずかりのログ修正。《ラスティアさんThanx!》
・ミサイル攻撃による防衛衛星崩壊ログを修正。《篁さんThanx!》
・マスコット怪獣がちゃんと家出してくれないバグを修正。《いそぴぃさんThanx!》

ver4.35
======= 2002/11/20
・首都ができた時「(オーナー名)シティー」という名前がつくはずだったのね…を修正。
・バトルフィールドでも人口が少なくなるとミサイルが撃てなくなるようにしていました
　が、人口０でも沈没しないんだから、撃てるようにしてればよかったですねm(_ _)m
・history.cgiの$Hemailバグ修正。
・巨大怪獣の「出現している島からの攻撃のみ有効」の能力をBattleFieldでは無効にな
　るようにした。
・体の再生をランダムに行う能力追加・・・これって能力か(・_・?

ver4.34
======= 2002/11/04
・トップページのアイコン欄の折り返しをスタイルシートで調整。
・history.cgiの<HR>の位置を調整。
・箱庭スキンの設定を調整。
　＞変更用スキンフォルダは、style.cssを置くフォルダの中に作る用に変更。
・マスコット怪獣が出撃時に別の怪獣に化けたり画像が表示されなくなるバグ修正。
　＞以前、テトラの画像が表示されなくなっていたバグと同様のことが、出撃させる部分
　　にあったみたいです(^^;;;

ver4.33
======= 2002/10/26
・ナビゲータの怪獣説明がずれていたのを修正。
・箱庭スキンをプレイヤーが設定できるようにした。
　＞ただし、html化したログについてはデフォルト・スキンのまま。
　＞html化の時のプレイヤーの設定にするように改造することは可能(してないけど)。
・箱庭スキン関連
　＞「目標補足」にもIDつけた。
　＞BodySpecial追加(^^;
　＞$HtagHeader_の残骸除去(^^;;
　＞プロック位置の微調整。
　＞style.cssを海戦JS版と一本化(ただし、色違い)。
　＞history.cgiにLinkHead,LinkFoot追加。作者ラスティアさんのサイトへリンク(^^)V

ver4.32
======= 2002/10/18
・色設定し忘れを修正。
・スタイルシート設定にプロック導入。《WatsonさんThanx!》
　＞ブロックごとに改行設定を入れて、NOBRとnowrapをスクリプトから削除。
・Hakoniwa Cup 優勝ログの出力順を変更。
・Hakoniwa Cup の対戦相手がポイント順になっていたのを、ランダムに変更。
・巨大怪獣に対する、広域被害、広域被害ミニ、噴火の処理を見直し。
　＞いずれもコアに対しては無効。他は、陸海のフラグ判定させるようにしたつもり。
　＞核ミサイルは、広域被害ミニです。

ver4.31
======= 2002/10/09
・色設定のすべてをstyle.css設定。
　＞徹底的にしたつもり・・・だけど、忘れた箇所があるかも(^^;;;

ver4.30
======= 2002/10/06
・軍事物資調達コマンド導入《WatsonさんThanx!》
　＞ミサイル１発につき軍事物資１個必要。
　＞設定で選べます。
・Watsonさん作の観光ナビゲータに船の説明を入れた。
・射程内に怪獣・巨大怪獣・腐海がなければ、ミサイルを発射中止にする設定をしても、
　自島に対しては自由にミサイルが撃てるようにした。
・マスコット怪獣の能力データがふっとんでしまうバグ修正。
　＞オール初期化されてしまいました・・・ごめんなさいm(_ _)m
・色設定のほとんどすべてをstyle.cssで設定するように変更。
　＞カッコいいデザインができたら、style.cssを是非公開してくださいm(_ _)m

ver4.29
======= 2002/10/04
・管理人あずかりを導入。
　＞管理人室で設定・解除。
　＞あずかりになった島は、ターン処理(収入処理・コマンド処理・成長・災害・失業者
　　移民)されなくなります。
　＞賞関係は処理されますし、他の島からの攻撃はすべて受けつけてしまいます。
　＞重複疑惑・荒し疑惑の島への措置のほか、長期間アクセスできない人への配慮などに
　　利用できるかと。
　＞注意！消えた島のデータは次にあずかり設定を変更するまで、そのままです。
・巨大怪獣の移動で、一部が欠けた怪獣の移動チェックが厳しすぎたのを修正。
・資金が見えるモードでミサイル発射可能数が見えないモードの時、トップ画面のバトル
　フィールドの欄の一番右がはみ出る症状を修正。
・生物大学とマスコット怪獣がいなくなってもステータスが表示されるバグ修正。
・島全体のヘックスをさがす処理（主に怪獣攻撃）の見直し（負荷軽減のため）。
・JSの入力済みコマンドの表示色を通常の場合に近づけた。
・怪獣派遣と記念碑発射を使うか使わないかをそれぞれ設定できるようにした。
・バトルフィールドに撃てるミサイルの種類を設定できるようにした。
・整地まとめログ若干修正。
・ウリエルの怪獣への攻撃の仕方が間違っていたのを修正。
・怪獣が倒れた時、怪獣出現数を減らすようにしていなかった箇所（とりあえず気づいた
　ところだけ）を修正。
・究想の「前選択」をパクった。《ラスティアさんThanx!》
　＞自島画面をクリックすれば連動して自島になるのだから、早くパクるべきでした(^^;
・「toto & Numbers」の購入者がいない時は、発見の記録に結果を出さないようにした。
・射程内に怪獣・巨大怪獣・腐海がなければ、ミサイルを発射中止にする設定。
　＞地形隆起弾の場合は、射程すべてが海ならＯＫ・・・にしようかと思ったけど、海底
　　地形の存在がバレるので（バレてもいいかもしれないけど）、やめました。
・巨大怪獣にコア防衛能力追加
　＞周囲すべてを消さない限りコアへの攻撃が無効になる能力（極悪です）。
　＞テスト用に「防衛いのら」作成。
　＞ローカルテストでは、海背景画像として究想の「シーいのら」をmonster00.gifと改
　　名して使っています(^^;;;
・巨大怪獣にミサイルが命中した時の挙動がおかしくなりそうな箇所を修正。

ver4.28
======= 2002/09/28
・巨大怪獣移動ルーチンの全面的な見直し。
　＞一部が欠けた巨大怪獣の移動にバグがあることが判明したため。
・時の記憶の保存ターンが、計画送信後「ターン１」と表示される症状と、観光画面に保
　存ターンが表示されない、ひさびさに「時の神殿」がらみのバグを修正。
・衛星レーザーに関するバグ修正。
　＞巨大怪獣の処理が入ってなかった。
　＞温泉関連でログの致命的なバグ。
　＞レーザーで焼き払ったあとに光石（記念碑）ができる時の座標バグ。
・巨大怪獣出現の際、移動できない地形へも出現できてしまう仕様を変更。
　＞巨大怪獣どうしの部分的な重なりが生じるのを防ぐため。
　＞移動できない地形には出現しないように調整した。
・整地ログをまとめて出力する場合のまとめ方を変更。
・HakoniwaCupで、参加島数算出バグ修正。
　＞ついでにログの出力順を調整。

ver4.27
======= 2002/09/21
・新型戦艦がオーバーヒートしたときに破壊される座標が間違っていたのを修正。
・巨大怪獣が海底基地を破壊したあとが陸地になるバグを修正。
・巨大怪獣の移動バグ修正。
　＞「左上」への移動の際、「10時」「11時」「12時」をチェックしなければならないの
　　に「12時」ではなく「12時の左上」をチェックしてしまってました。
　＞従って、コアから見て「12時」の位置に通常移動できないはずの地形がある場合、荒
　　地になってしまうのでした。
・バトルフィールドを強制削除すると最下位の島が削除されターン更新ができなくなるバ
　グ修正。

ver4.26
======= 2002/09/11
・首都名がターン更新で消えるバグ修正。
・多目的スタジアムの経験値が正しく計算されていないのを修正。
・移民を災難賞にいれないはずが２倍にしていれていたバグを修正。
・トップページの部門賞(TITLE属性)で「生物大学能力」が表示されないバグ修正。
・温泉枯渇ログがない致命的なバグ(logOilEndをlogDamageAnyに変更)を修正。

ver4.25
======= 2002/08/29
・ローカル掲示板モジュール(hako-lbbs.cgi)を地図モードモジュール(hako-map.cgi)か
　ら分離。
・観光掲示板を外部CGI(lbbs.cgi)にできる設定を導入。
　＞箱庭のデータを一切読み込まないので、別のサーバに設置可能。
　　管理のために掲示板の更新状況を一覧できるツール(view.cgi)も用意。
　＞データをIDで作るので、遣い回しの際には管理人が消す必要あり。
　　消し忘れを考慮して「データ初期化」機能を島主に公開。
　＞ただし、機能が少なくセキュリティも甘い・・・(・_・?。
　＞ファイル・ロックをせず、投稿コードを採用したのも心配なところ。
　＞従来の観光掲示板と併用可能。（人柱募集中！）
・ユニーク地形がトップ表示されないバグ修正。
・海あみゅの収入が010713モデルのまま（020610モデルより少ない）のを修正。
　＞ただし、インフレすぎるのでイージー・モードとして取り込む。
・オリジナルのデータを読み込んだ場合、首都がなくてもトップに「首都：」と表示され
　るバグの修正。
・ＪＳ開発画面で首都名変更後にJavaScriptによる記述が消えるバグ修正。
・開発画面に出現中の怪獣画像がうまく表示されないバグ修正。
・倒した巨大怪獣がすべてになってしまうバグ修正。
　＞データが4294967295(16進でFFFFFFFF)になってしまってました。
・家のランクがマップ画面だけ最新のポイントを反映していないバグ修正。
・島発見時にトップとマップで順位が食い違うのを修正。
　＞オリジナルの仕様だと思うけど、問い合わせがあると面倒なので。
・予想欄のデータの読み書きが正常に行われないバグ修正。
・大学がある場合、収穫がうまく計算されないバグ修正。
　＞って、修正しちゃうとsub incomeに$co0とか$co1とか、書いてても意味ないぢゃん。

ver4.24
======= 2002/08/20
・首都名が変更できないバグ修正。
・ペット怪獣のステータス合計が表示されないバグ修正。
・腐海発生ログのバグ修正。
・HakoniwaCupの処理バグ修正。
　＞優勝してもカウントされないバグを含む。
・収入（お金）と収穫（食料）の色設定をスタイルシートでできるようにした。
・@axと@ayを微妙に変更。
・まとめた整地ログの出力位置を微妙に変更。
・countAruondを新しいものに変更。《やすさんThanx!》
　＞やすさんのcountAround改良版をさらに改良。
　＞countAroundSとcountAroundTを廃止・・・負荷に変化なし。
・ターン分割更新機能追加。
　＞テスト用(参考？)に残しています（誰の？って聞かないでね）。
　＞！この設定は危険ですので、0:未設定のままにしておいてください。
　　　設定変更によってデータの破損が起こったり、サーバー管理者とトラブルが生じる
　　　可能性があります。

ver4.23
======= 2002/08/14
・通常開発モードや観光画面でマップ表示が崩れるバグ修正。
　＞「地形詳細表示」搭載時に生じたバグ。
・島主の家のランクに「城」が抜けていたバグ修正。
・怪獣移動で、移動先が荒地の場合にはログを出さないようにした。
・sub landString内の無駄な関数呼び出し(sub expToLevel)を削除。

ver4.22
======= 2002/08/11
・Watsonさんの「地形詳細表示」搭載。《WatsonさんThanx!》
　＞ただし、怪獣の説明とか中途半端。船の説明はなし。
　＞ウィンドウの表示位置を調整。
・gzip圧縮転送の利用設定。《WatsonさんThanx!》
・ログのhtml化をhistory.cgiで行うように変更。
　＞これにより、html化してもターン更新時の負荷は増えません。
　＞ただし、処理をロックしていないので、表示が崩れた場合は、管理者による「強制出
　　力」が必要。
・トップページのポイントのあと「pts.」が表示されないバグ修正。
・怪獣に隣接した海底都市・海底首都の人口が減少するログに座標が表示されるバグ（？
　仕様）修正。
・古代遺跡の収入ログ関数の差し替えミスでターン更新が出来なくなるバグ修正。
・テトラやミカエルが怪獣を攻撃しないバグ（？仕様）を修正。
　＞ただし、020610モデルからは同一ターンの攻撃は２体まで。
　＞つまり、テトラは覚醒しない？！

ver4.21
======= 2002/8/7
・農場整備など回数指定していないのに２度くり返されるバグ修正。
　＞ver4にアップしたときに生じたバグ。
・巨大怪獣の能力追加(ver4.2)で生じたバグ修正。
・さらに巨大怪獣の能力追加。《Ａ．ＯさんThanx!》
　＞出現している島から他の島へ移民が起こる。

ver4.2
====== 2002/08/06
・卵復活でメカいのらになってしまうバグ修正。
・巨大怪獣の能力追加。《〓ＢＡＴＵ〓さんThanx!》
　＞ランダム・ワープ(体力が偶数になった時他の島へワープ)
　＞出現している島からの攻撃のみ有効

ver4.1
====== 2002/08/02
・hako-toto.cgiのログ関数の差し替えミスでターン更新が出来なくなるバグ修正。
・ステルス・ミサイルのログが発射した島の近況に表示されるバグ（？仕様）修正。
・ランキングの「軍事力」の表示バグ修正。
・コマンドのポップアップ入力ウィンドウの、ポップアップする位置を若干調整。
・「管理人による地形変更モード」で地形の値の整合性をチェックしないようにした。
　＞関数を整理するのが面倒臭いから。

ver4
==== 2002/07/23
・020610モデルへ移行。
　＞実は、010713→020610差分をもとにver3.9895を改造。
　＞トップ画面は010713モデルのまま。
　＞したがって、予想欄は２つ。
　＞オリジナルから移行する場合の注意点は、ver3.xと同様で、島ＩＤが１００を越える
　　場合に、BattleField設定変更が必要なこと。
　＞ver3.xから移行する場合は、「時の神殿」（と「巨大怪獣」）の地形の数値が異なる
　　ので、そのまま移行すると地形が変わってしまうこと。
・rajs-readme.txt同梱。
　＞ver3.x系からの移行に若干問題点があるため。
・ＪＳ開発画面上で、コマンドのポップアップ入力の金額を非表示（TITLEタグで表示）
　にした。《ラスティアさんThanx!》
・ポップアップする位置がマップ画面からなるべくはみ出さないように調整。
・島発見時に大学・港町・ニュータウン１つずつと人工衛星１つを最初からもっていたり、
　資金繰り時の援助金をイージーモードとして設定。

ver3.989〜3.9895
================ 2002/06/30 〜 2002/08/11(公開終了)
※このバージョンはver4へ移行する原型です。バグ修正の予定もありません。
・010713モデルベースの巨大怪獣導入バージョン
・JavaScriptモードで、ターゲットの島が無くなった場合「無人島」と表示されるように
　した。
・BattleFieldの怪獣出現判定を開発状態に応じて変化するように修正
・「時の記憶」を4096ターン以降で行うと地形データがバグる問題の修正。
・オリジナルからのデータ移行で、howner.datが正しく読めないバグを修正。

ver3.985b+4
========= 2002/09/29(未公開)
・バトルフィールドを強制削除すると最下位の島が削除されターン更新ができなくなるバ
　グ修正。
・時の記憶の保存ターンが、計画送信後「ターン１」と表示されるバグ修正。
・まとめた整地ログの出力位置を微妙に変更。
・資金が見えるモードでミサイル発射可能数が見えないモードの時、トップ画面のバトル
　フィールドの欄の一番右がはみ出る症状を修正。
・歴代最多人口記録のデータファイルを作ったターンにトップページの順位がおかしくな
　るバグを修正。《〓ＢＡＴＵ〓さんThanx!》
　＞結局islandSortを仕様変更しました。《かっちんさんThanx!》
　＞「歴代最多人口記録」の新しい島の記録ターンにバグがあったのを修正。


ver3.985b
========= 2002/09/05 〜 2002/10/04(公開終了)
・移民を災難賞にいれないはずが２倍にしていれていたバグを修正

ver3.985aまでの改造点
===================== 2002/08/11 〜 2002/09/05(公開終了)
※このバージョンはすでに開発を終了(2002/05/27)しています。
　＞参考：箱庭諸島【海戦】クラブ「ＲＡ JS版(010713モデル)の開発終了宣言」
　　　　　　http://club.lycos.co.jp/bbs/view.asp?cid=f0400039&iid=3&num=890
※バグ修正のみ対応いたします。
※ver3.x系からオリジナル020610モデルへのデータ移行ツールは箱庭諸島【海戦】クラブ
　のライブラリにあります。(ＲＡとおさらばしようと思って作ったツールだったのに…)
・010713モデルをベースにJavaScriptモードを導入。《あっぽーさんThanx!》
・初期設定用スクリプト(hako-init.cgi)の導入。《WatsonさんThanx!》
・新規作成モジュール(hako-make.cgi)の導入。
・出来事・近況表示スクリプト(history.cgi)の導入。《ラスティアさんThanx!》
・toto & Numbersスクリプト(hako-toto.cgi)をターン進行モジュール(hako-turn.cgi)か
　ら分離。
・地図モードモジュール(hako-map.cgi)とＪＡＶＡスクリプト(hako-js.cgi)の重複部分
　を統合。
・アクセスログ解析スクリプト(analyzer.cgi)導入。《長猫さんThanx!》
・メンテナンスツール(hako-mente.cgi)を差し替え。《親方さんThanx!》

・色表示にスタイルシート(style.css)を利用《WatsonさんThanx!》
・JavaScriptの一部を外部ファイル化(hakojima.js)する機能を導入。
・パスワードを外部ファイルに保存するようにした。《親方さんThanx!》
・オーナーデータ(howner.dat)をメインデータ(hakojima.dat)に統合できるようにした
　（ゲーム開始後は変更不可）。
・ミサイル発射可能数を表示するようにした。《親方さんThanx!》
・フレックス更新設定を導入。
　＞ターン更新間隔を時間単位で自由に変更可能。
・xbar.gifを使わずマップ表示をするようにした。
・新規登録を管理人だけが行えるような設定を導入。《親方さんThanx!》
・名前の後ろを「島」以外に変更できるようにした。《ラスティアさんThanx!》
・季節設定の導入。
　＞１ターンが１ヶ月で、春夏秋冬で災害率や収入収穫率の変更可能。
　＞季節でマップ画像の変更可能。
・ゲーム終了ターン設定導入。《親方さんThanx!》
　＞トップページに「終了ターン」「終了日時」を表示。
・サバイバル・モード導入。《しろいわさんThanx!》
　＞規定ターン以降、設定ターンの間隔で最下位の島が沈没する。
・リアルタイマーを画像を使わないものに変更し、使うか使わないか設定できるようにし
　た。《親方さんThanx!》
・トップページに表示する島の数を設定できるようにした。《親方さんThanx!》
・「最近の出来事」「近況」の表示をhistory.cgiで行うかどうかを（「最近の出来事」
　についてはhtml化も含めて）設定できるようにした。《ラスティアさんThanx!》
　＞html化したログの保存機能追加。(ver4では機能削除)
・「発見ログ」をスクロール画面内に表示。
・「情報変更」と「画像のローカル設定」「ランキング」をそれぞれ別画面で表示。
・ローカル掲示板への極秘通信導入。《親方さんThanx!》
・ローカル掲示板へ投稿した島への自動リンク。
・クッキーによるＩＤチェック導入。
　＞開発画面に入る時にクッキーのＩＤと同じ島かどうかチェック。
　＞開発画面に入る時に画像のローカル設定をしているかどうかチェック。
・アクセスログがとれるようにした。《長猫さんThanx!》
　＞開発画面に入る時にとれば、「クッキーチェック」と連動します。
　＞トップページでとれば、負荷がべらぼーです。
・負荷計測機能導入。《親方さん、ラスティアさんThanx!》
・資金の表示に「1000の位で四捨五入」を追加。
・複数のミサイルコマンドを一括実行できる設定導入。《親方さんThanx!》
・油田、遊園地、漁船系の収入(収穫)ログをまとめる設定。
・整地ログをまとめる設定。
・ミサイルの荒地・効果なし・領域外・防衛圏内のいわゆる無効ログをまとめる（「座標
　つき」「座標なし」が選べる）設定。(ver4では020610モデルの機能にあわせたため機
　能削除)
・自島が撃ったミサイルは防衛されないようにする設定。《親方さんThanx!》
・防衛施設が100%の防衛をしないようにする設定。《親方さんThanx!》
・防衛施設直撃のミサイルも防衛する設定。《親方さんThanx!》
・怪獣の能力追加。《親方さんThanx!》
　＞「ワープする」「ワープする（周囲の地形も巻き込む）」
　＞「怪獣が周囲を焼き尽くす(周囲６マス壊滅)」「瀕死になると大爆発(周囲６マス壊
　　滅)」「仲間を呼ぶ」（一部怪獣には導入ずみでした）
・ＪＳ開発画面の計画入力でショートカット・キーが使えるようにした。《親方さん、ラ
　スティアさんThanx!》
・新地形「時の神殿」導入。
　＞出現条件『大陸と地を隔て清浄なる樹海に浮かびし霊山の頂にて聖なる時告ぐる』
　　(ver4では「山」を「古代遺跡」に変更したので『霊山』ではなく『霊廟』でしょう
　　か？)
・新コマンド「時の記憶」「時の忘却」導入。
　＞地形データの保存（記憶）・復元（忘却）。
　＞「時の神殿」が出現している時だけ使用可能。「時の神殿」が消えると保存データも
　　消失。
・「歴代最多人口記録」導入。《isapaさんThanx!》
・管理人によるプレゼントモード導入。《親方さんThanx!》
・管理人による制裁モード導入。《親方さんThanx!》
・島の強制削除導入。
・管理人による地形変更モード導入。
　＞ひとつずつしか変更できません。
・BattleField作成モード導入。
　＞人口０でも沈まない島。
・メンテナンスツール(hako-mente.cgi)に「管理人室」設置。
　＞「プレゼントを贈る」「制裁を加える」「地形データを変更する」「強制削除する」
　　「Battle Fieldを作成」「Battle Field開発画面に入る」「アクセスログをみる」
・島ＩＤを使い回すように変更。
　＞オリジナルからの移行時に、ＩＤが１００を越える島についてはBattleFieldになっ
　　てしまうので、「BattleField作成モード」で普通の島へ設定変更する必要が生じた。
・マップサイズ変更機能。
　＞画像チップ(通常32x32)を16として、1〜32の範囲でサイズ変更可能。
　＞「予想１」の欄に(mapsize@14)のように記入。
・アクセスログ解析スクリプトにパスワード設定。
・ターン更新の処理全体を見直し負荷軽減。
　＞似ているログ出力関数をある程度まとめた。
　＞countAroundを海系、都市系で専用のものをそれぞれ用意した。
　＞無駄なループ処理を減らした。
　＞この改造に伴うバグと、バグ修正は数えきれず。
・その他
　＞スクリプト全体のインデントをきれいにして下さったのは、Watsonさんです。感謝！

【番外】

light
===== 2002/06/11 〜 2002/07/20(公開終了)
※このバージョンは遊びで作ったものです。バグ修正の予定もありません。
・ver3.982をベースに、010713モデルの機能のままで（つまり、機能的には余分なものを
　削除して）、負荷を軽減したもの。
　＞「時の神殿」「歴代最多人口記録」「アクセス・ログ」を削除。
　＞さらに、「季節」と「クッキーによるＩＤチェック」もカット。
　＞とどめに、オリジナルとのデータの互換性を捨てて、無駄なデータ保存領域もカット。
　＞ターン更新時の負荷としては、ほとんど影響がないと思われる「サバイバルモード　
　　（ゲームの終了が一番の負荷軽減とも言える？）」とか「フレックス設定（サーバー
　　が混雑する時間帯を避ける）」とかは残した。
　＞あと、バトルフィールドは普通の島１つ分の負荷だし、管理人モードはなにかと便利
　　そうなので、残した。

navyβ0.8〜β0.84
================= β0.8のみ公開 2002/03/24 〜 2002/07/20(公開終了)
※このバージョンは遊びで作ったものです。バグ修正の予定もありません。
・ＲＡのデータ構造を親方さんの２ｎｄにあわせて、海戦の艦隊パックを導入。
　＞お得なデータ変換ツールつき！（公開当時）
　＞ＲＡ JS版3.93と海戦 JS版4β20のバグをそのまま受け継いでいる。

[EOF]